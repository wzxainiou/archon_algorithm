# 📸 检测结果报告说明

## 概述

现在报告中会详细展示每个模型在每张图片上检测到的物体，包括：
- 🏷️ **物体类别名称**（如 person, bus, tie）
- 📊 **置信度分数**（0.0 - 1.0）
- 📍 **边界框坐标**（精确位置）
- 📈 **类别统计**（各类物体数量和百分比）

---

## 📋 报告结构

### 1. 类别分布统计

显示所有检测到的物体类别及其数量：

```markdown
**类别分布** (共检测到 8 个对象):

- 👤 **person**: 6次 (75.0%)
- 🚌 **bus**: 1次 (12.5%)
- 👔 **tie**: 1次 (12.5%)
```

### 2. 按帧详细检测结果

每张图片的检测结果单独列出，便于对照：

```markdown
**Frame: bus.jpg** (5 个对象)

  1. 🚌 **bus** (置信度: 0.94) - 位置: [x1=4, y1=229, x2=796, y2=728]
  2. 👤 **person** (置信度: 0.89) - 位置: [x1=671, y1=395, x2=810, y2=879]
  3. 👤 **person** (置信度: 0.88) - 位置: [x1=47, y1=400, x2=239, y2=904]
  4. 👤 **person** (置信度: 0.86) - 位置: [x1=223, y1=409, x2=344, y2=860]
  5. 👤 **person** (置信度: 0.62) - 位置: [x1=0, y1=556, x2=69, y2=872]
```

---

## 🔍 如何理解检测结果

### 图片名称对应

**问题**：我想知道 bus.jpg 这张图片上检测到了什么？

**答案**：在报告中找到 `**Frame: bus.jpg**` 章节，下面列出了该图片上所有检测到的物体。

**示例**：
```
Frame: bus.jpg (5 个对象)
  1. 🚌 bus (置信度: 0.94)
  2. 👤 person (置信度: 0.89)
  3. 👤 person (置信度: 0.88)
  ...
```

说明这张图片上检测到了 1 辆公交车和 4 个人。

---

### 置信度分数

**含义**：模型对该检测结果的确信程度

**评级标准**：
- ✅ **0.90 - 1.00**：非常确信（excellent）
- ✅ **0.70 - 0.90**：比较确信（good）
- ⚠️ **0.50 - 0.70**：一般确信（fair）
- ❌ **< 0.50**：不太确信（可能误检）

**示例**：
```
bus (置信度: 0.94)  ← 94%确信这是一辆公交车
person (置信度: 0.62)  ← 62%确信这是一个人（可能部分遮挡）
```

---

### 边界框坐标

**格式**：`[x1, y1, x2, y2]`

**含义**：
- `x1, y1`：物体边界框的**左上角**坐标
- `x2, y2`：物体边界框的**右下角**坐标

**坐标系**：
```
(0,0) ──────────────────────> X轴（向右）
  │
  │   (x1,y1) ┌──────────┐
  │           │ 检测物体 │
  │           └──────────┘ (x2,y2)
  │
  ↓ Y轴（向下）
```

**示例**：
```
位置: [x1=4, y1=229, x2=796, y2=728]
```

这表示：
- 物体左上角在 (4, 229)
- 物体右下角在 (796, 728)
- 物体宽度 = 796 - 4 = 792 像素
- 物体高度 = 728 - 229 = 499 像素

---

## 📊 实际案例分析

### 案例 1: bus.jpg

根据报告：
```
Frame: bus.jpg (5 个对象)

  1. 🚌 bus (置信度: 0.94) - 位置: [x1=4, y1=229, x2=796, y2=728]
  2. 👤 person (置信度: 0.89) - 位置: [x1=671, y1=395, x2=810, y2=879]
  3. 👤 person (置信度: 0.88) - 位置: [x1=47, y1=400, x2=239, y2=904]
  4. 👤 person (置信度: 0.86) - 位置: [x1=223, y1=409, x2=344, y2=860]
  5. 👤 person (置信度: 0.62) - 位置: [x1=0, y1=556, x2=69, y2=872]
```

**分析**：
1. **主体物体**：一辆公交车（94% 置信度，占据画面中间大部分）
2. **右侧人物**：最清晰（89% 置信度）
3. **左侧人物**：较清晰（88% 置信度）
4. **中间人物**：清晰（86% 置信度）
5. **最左侧人物**：部分遮挡（62% 置信度，只露出小部分）

### 案例 2: zidane.jpg

```
Frame: zidane.jpg (3 个对象)

  1. 👤 person (置信度: 0.84) - 位置: [x1=749, y1=42, x2=1148, y2=711]
  2. 👤 person (置信度: 0.78) - 位置: [x1=149, y1=203, x2=1125, y2=715]
  3. 👔 tie (置信度: 0.45) - 位置: [x1=361, y1=438, x2=525, y2=717]
```

**分析**：
1. **右侧人物**：清晰识别（84% 置信度）
2. **中间人物**：占据大部分画面（78% 置信度）
3. **领带**：较难识别（45% 置信度，因为是小物体）

---

## 🔄 不同模型的对比

同一张图片，不同模型的检测结果可能略有不同：

### yolo11n_rgb vs yolo11s_rgb (bus.jpg)

| 模型 | 检测总数 | person | bus | tie |
|------|---------|--------|-----|-----|
| **yolo11n_rgb** | 5个 | 4个 | 1个 | 0个 |
| **yolo11s_rgb** | 5个 | 4个 | 1个 | 0个 |

两个模型在 bus.jpg 上检测结果相似，都识别出了公交车和4个人。

### yolo11n_rgb vs yolo11s_rgb (zidane.jpg)

| 模型 | 检测总数 | person | tie |
|------|---------|--------|-----|
| **yolo11n_rgb** | 3个 | 2个 | 1个 |
| **yolo11s_rgb** | 4个 | 2个 | 2个 |

**yolo11s_rgb** (更大的模型) 检测到了额外的一个领带（第二个领带可能是误检，置信度仅30%）。

---

## 💡 使用建议

### 1. 如何找到特定图片的检测结果

1. 打开 `outputs/[时间戳]/report.md`
2. 搜索图片名称，例如 `bus.jpg`
3. 查看该章节下的所有检测结果

### 2. 如何判断检测质量

- **置信度 > 0.8**：结果可信
- **置信度 0.5-0.8**：结果基本可信
- **置信度 < 0.5**：需要人工核验

### 3. 如何对比不同模型

在报告中，每个模型都有独立的 `📸 检测结果统计` 章节：

- 找到 `### yolo11n_rgb` → 查看其检测结果
- 找到 `### yolo11s_rgb` → 查看其检测结果
- 对比两者的类别分布和具体检测

### 4. JSON 报告用于程序化处理

如果需要用代码处理检测结果：

```python
import json

# 读取 JSON 报告
with open('outputs/[时间戳]/report.json', encoding='utf-8') as f:
    data = json.load(f)

# 获取第一个模型的检测结果
model_0 = data['models'][0]
detection_summary = model_0['detection_summary']

# 类别分布
print(detection_summary['class_distribution'])
# 输出: {'bus': 1, 'person': 6, 'tie': 1}

# 逐帧检测详情
for frame_det in detection_summary['frame_detections']:
    print(f"Frame: {frame_det['frame_name']}")
    for det in frame_det['detections']:
        print(f"  - {det['class']}: {det['confidence']:.2f}")
```

---

## ❓ 常见问题

### Q1: 为什么同一张图片上，不同模型检测到的物体数量不同？

**A**: 不同模型的能力不同：
- **yolo11n**: 更快，但可能漏检小物体
- **yolo11s**: 更慢，但检测更全面

### Q2: 边界框坐标怎么用？

**A**: 如果要在图像上绘制检测框：

```python
import cv2

# 读取图片
img = cv2.imread('bus.jpg')

# 绘制边界框 [x1, y1, x2, y2]
bbox = [4, 229, 796, 728]
cv2.rectangle(img,
              (int(bbox[0]), int(bbox[1])),  # 左上角
              (int(bbox[2]), int(bbox[3])),  # 右下角
              (0, 255, 0),  # 颜色 (绿色)
              2)  # 线宽

# 保存结果
cv2.imwrite('bus_with_box.jpg', img)
```

### Q3: 置信度低的检测是误检吗？

**A**: 不一定。低置信度可能是因为：
1. 物体部分遮挡（如 person 0.62）
2. 物体很小（如 tie 0.45）
3. 光照条件差
4. 确实是误检

建议：**置信度 < 0.5 的结果需要人工核验**

### Q4: 能输出带检测框的图片吗？

**A**: 模型完全支持这个功能！查看 `MODEL_CAPABILITIES.md` 的可视化章节了解如何添加此功能。

---

## 📚 更多资源

- **模型能力详解**：查看 `MODEL_CAPABILITIES.md`
- **完整文档**：查看 `README.md`
- **快速开始**：查看 `QUICK_START.md`

---

*最后更新：2025-12-13*
